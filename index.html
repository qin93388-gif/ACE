<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>你已作弊！</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background-color: #E52C2C; /* 初始红色（加载完成后自动替换） */
            color: #FFFFFF;
            font-family: "Microsoft Yahei", sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            transition: background-color 0.3s;
        }
        .ace-logo {
            width: 220px;
            height: auto;
            margin-bottom: 15px;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 4px;
        }
        .logo-text {
            font-size: 22px;
            margin-bottom: 30px;
        }
        .main-title {
            font-size: 40px;
            font-weight: bold;
            margin-bottom: 25px;
        }
        .sub-title {
            font-size: 28px;
            margin-bottom: 30px;
        }
        .description {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 45px;
            max-width: 450px;
        }
        .continue-btn {
            background-color: transparent;
            color: #FFFFFF;
            border: 1px solid #FFFFFF;
            padding: 12px 35px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <img src="https://raw.githubusercontent.com/qin93388-gif/ACE/refs/heads/main/ace-logo.png" alt="ACE腾讯游戏安全" class="ace-logo" id="logo">
    <p class="logo-text">腾讯游戏安全</p>
    <h1 class="main-title">检测到作弊者</h1>
    <p class="sub-title">比赛终止</p>
    <p class="description">作弊者已受到惩罚，游戏取消，所有玩家的输赢均不计入。</p>
    <button class="continue-btn">继续</button>

    <script>
        const logo = document.getElementById('logo');
        const body = document.body;
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        // Logo加载完成后，自动提取红色并同步
        logo.onload = function() {
            canvas.width = logo.width;
            canvas.height = logo.height;
            ctx.drawImage(logo, 0, 0);

            // 扫描Logo核心区域（避免边缘杂色），提取占比最高的红色
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const colorCounts = {};
            let maxCount = 0;
            let targetColor = 'rgba(229, 44, 44, 1)'; // 备用红色

            // 遍历像素（每隔2个像素扫描，提升效率）
            for (let i = 0; i < data.length; i += 8) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                const a = data[i + 3] / 255;

                // 筛选红色（R值远大于G、B值）
                if (r > 150 && g < 100 && b < 100) {
                    const color = `rgba(${r}, ${g}, ${b}, ${a})`;
                    colorCounts[color] = (colorCounts[color] || 0) + 1;

                    // 记录出现次数最多的红色
                    if (colorCounts[color] > maxCount) {
                        maxCount = colorCounts[color];
                        targetColor = color;
                    }
                }
            }

            // 自动同步为网页背景色
            body.style.backgroundColor = targetColor;
        };

        // 若Logo加载失败，保持初始红色
        logo.onerror = function() {
            body.style.backgroundColor = '#E52C2C';
        };
    </script>
</body>
</html>
